(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-065edfa5"],{"00fa":function(t,n,i){},"24a4":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"page-company-admins"},[i("n-card",{attrs:{loading:t.$toggler.loading}},[i("div",{staticClass:"tools"},[i("n-button",{attrs:{icon:"plus"},on:{click:function(n){return t.$toggle("add",!0)}}},[t._v("Добавить администратора")])],1),i("n-table",{attrs:{data:t.admins,columns:t.columns},scopedSlots:t._u([{key:"tools",fn:function(n){var e=n.item;return[i("n-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[i("n-button",{attrs:{icon:"pen",flat:"",round:""}})],1),t.admins.length>1?i("n-button",{attrs:{icon:"minus",flat:"",round:""},on:{click:function(n){return t.remove(e)}}}):t._e()]}}])})],1),t.$toggler.add?i("n-modal",{attrs:{loading:t.$toggler.loadingAdd},on:{close:function(n){return t.$toggle("add",!1)}}},[i("n-select",{attrs:{data:t.users,"option-title":"fullName","selected-title":"fullName","item-value":"id",value:t.newAdmin,title:"Пользователь"},on:{"update:value":function(n){t.newAdmin=n}}}),i("n-button",{staticStyle:{"margin-top":"15px"},attrs:{color:"primary",wide:""},on:{click:t.submit}},[t._v("Добавить администратора")])],1):t._e()],1)},a=[],o={name:"PageCompanyAdmins",data:function(){return{users:[],admins:[],newAdmin:null,columns:[{title:"ФИО",name:"fullName"},{title:"ИИН",name:"iin"},{title:"Должность",name:"position"},{title:"",name:"tools",align:"center",width:"100px"}]}},mounted:function(){this.load()},methods:{load:function(){var t=this;this.$toggle("loading",!0),$api.users.get().then((function(n){t.admins=$n.filter(n.data,["isAdmin",!0]),t.users=$n.filter(n.data,["isAdmin",!1]),t.$toggle("loading",!1)}))},submit:function(){var t=this;this.$toggle("loadingAdd",!0),this.$toggle("loading",!0),setTimeout((function(){t.admins.push(t.newAdmin),t.users=$n.filter(t.users,(function(n){return n.id!==t.newAdmin.id})),t.newAdmin=null,t.$toggle("add",!1),t.$toggle("loadingAdd",!1),t.$toggle("loading",!1)}),400)},remove:function(t){var n=this;this.$toggle("loading",!0),setTimeout((function(){n.users.push(t),n.admins=$n.filter(n.admins,(function(n){return n.id!==t.id})),n.$toggle("loading",!1)}),400)}}},l=o,s=(i("459b"),i("2877")),d=Object(s["a"])(l,e,a,!1,null,"1951b0cc",null);n["default"]=d.exports},"459b":function(t,n,i){"use strict";var e=i("00fa"),a=i.n(e);a.a}}]);
//# sourceMappingURL=chunk-065edfa5.2ac4bc10.js.map